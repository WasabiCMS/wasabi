define(["jquery","common/views/BaseView","Spinner","common/constants/SpinPresets","jquery.color"],function(n,e,t,i){return e.extend({el:"#GroupPermissionIndexForm",events:{"click .single-submit":"onSingleSubmit"},singleSubmitEndpoint:null,initialize:function(){this.singleSubmitEndpoint=this.$el.attr("action")},onSingleSubmit:function(e){e.preventDefault();var o=n(e.target);o.hide().blur();var r=new t(i.small),s=n("<div/>").css({position:"relative"});o.parent().append(s),r.spin(s[0]),n.ajax({type:"post",url:this.singleSubmitEndpoint,data:o.parent().parent().find("input").serialize(),cache:!1,success:function(){var e=o.parent().parent(),t=o.parent().css("backgroundColor");r.stop(),s.remove(),o.show(),e.find("td:not(.controller)").stop().css({backgroundColor:"#fff7d9"}).animate({backgroundColor:t},1e3,function(){n(this).css({backgroundColor:""})})}})}})});