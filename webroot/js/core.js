/*!
* Wasabi Core
* Copyright (c) 2014 Frank FÃ¶rster
*/

define(["jquery","wasabi","bootstrap.dropdown"],function(e,t){var i=function(e){e=e||{},this.translations=e.translations||{}};return i.prototype=function(i,n){function s(){e("html").removeClass("no-js"),t.core=this,a(),c(),f(),v(),l(),require(["common/views/Navigation","common/views/NavToggle"],function(e,i){t.views.navigation=t.viewFactory.create(e),t.views.navToggle=t.viewFactory.create(i)})}function a(){e.ajaxSetup({dataType:"json"}),e(n).ajaxSuccess(o).ajaxError(r)}function o(t,i){if(200==i.status&&"OK"==i.statusText){var n=e.parseJSON(i.responseText)||{};"undefined"!=typeof n.status&&"undefined"!=typeof n.flashMessage&&u("div.title-pad",n.status,n.flashMessage)}}function r(t,n){var s;401==n.status&&(s=e.parseJSON(n.responseText)||{},"undefined"!=typeof s.name&&(confirm(s.name),i.location.reload())),500==n.status&&(s=e.parseJSON(n.responseText)||{},"undefined"!=typeof s.name&&u("div.title-pad","error",s.name))}function u(t,i,n){var s=e(t);if(s.length){e("#flashMessage").remove();var a=e('<div id="flashMessage"></div>');a.addClass(i).html(n),s.after(a)}}function c(){require(["common/views/Tabs"],function(i){e(".tabs").each(function(){t.views.tabs=t.views.tabs||[],t.views.tabs.push(t.viewFactory.create(i,{el:e(this)}))})})}function f(){require(["common/views/Modal","jquery.livequery"],function(i){e('[data-toggle="modal"], [data-toggle="confirm"]').livequery(function(){t.views.modals=t.views.modals||[],t.views.modals.push(t.viewFactory.create(i,{el:e(this)}))})})}function v(){require(["jquery.multiselect"],function(){e(".mselect").multiSelect()})}function l(){require(["jquery.toggleSelect"],function(){e('[data-toggle="select"]').toggleSelect()})}return{init:function(){s.call(this)},menuItems:function(){require(["core/views/MenuItems"],function(e){t.views.Core.menuItems=t.viewFactory.create(e)})},languages:function(){require(["core/views/Languages"],function(e){t.views.Core.languages=t.viewFactory.create(e)})},settingsMedia:function(){require(["core/views/SettingsMedia"],function(e){t.views.Core.settingsMedia=t.viewFactory.create(e)})},permissions:function(){require(["core/views/Permissions"],function(e){t.views.Core.permissions=t.viewFactory.create(e)})}}}(window,document),i});